<a ng-click="showNewFeatureModal()">Create new feature</a>

<hr/>

<form id="feature-search" class="form-search">
    <input type="text" class="span7" ng-model="featureQuery" ui-select2="querySelect2Options">
    <img src="/js/select2/select2-spinner.gif" width="16" height="16" ng-show="!queryReturned"/>
</form>

<table id="feature-list" class="table table-striped table-hover" ng-show="queryReturned">
    <thead>
    <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Eng Cost</th>
        <th>Revenue</th>
        <th>Retention</th>
        <th>Positioning</th>
        <th>Score</th>
        <th>Problems</th>
        <th>ARR</th>
        <th>Quarter</th>
        <th>Team</th>
        <th>Last Modified</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="feature in features">
        <td>{{feature.id}}</td>
        <td><a ng-click="editFeature(feature)">{{feature.title | truncate:30}}</a></td>
        <td>{{feature.engineeringCost}}</td>
        <td>{{feature.revenueBenefit}}</td>
        <td>{{feature.retentionBenefit}}</td>
        <td>{{feature.positioningBenefit}}</td>
        <td>???</td>
        <td>???</td>
        <td>???</td>
        <td>{{feature.quarter}}</td>
        <td>{{feature.team.name}}</td>
        <td><a href="mailto:{{feature.lastModifiedBy.email}}">{{feature.lastModifiedBy.name}}</a> on {{feature.lastModified | date}}</td>
    </tr>
    </tbody>

</table>

<div modal="showNewFeature" close="closeNewFeature()" options="modalOptions">
    <div class="modal-header">
        <h3>Create new feature</h3>
    </div>
    <div class="modal-body">

        <form>

            <div class="controls">
                <input type="text" class="span8" ng-model="newFeature.title" autofocus="autofocus" placeholder="Feature" required>
            </div>

            <div class="controls controls-row">
                <textarea class="span8" rows="10" ng-model="newFeature.description" placeholder="Extended Description"></textarea>
            </div>

            <div class="controls controls-row">
                <select class="span2" ng-model="newFeature.engineeringCost" ng-options="e for e in enumSizes"></select>
                <select class="span2" ng-model="newFeature.revenueBenefit" ng-options="e for e in enumSizes"></select>
                <select class="span2" ng-model="newFeature.retentionBenefit" ng-options="e for e in enumSizes"></select>
                <select class="span2" ng-model="newFeature.positioningBenefit" ng-options="e for e in enumSizes"></select>
            </div>

            <div class="controls controls-row">
                <select class="span3" ng-model="newFeature.team"></select>
                <select class="span2" ng-model="newFeature.quarter" ng-options="e for e in enumQuarters"></select>
                <select class="span3" ng-model="newFeature.state" ng-options="e for e in enumFeatureStates"></select>
            </div>

            <div class="controls controls-row">
                <input type="text" class="span8" ui-select2="select2Options" ng-model="newFeature.tags"/>
            </div>

        </form>

        <span class="error" ng-show="error == null">{{error}}</span>

    </div>
    <div class="modal-footer">
        <button class="btn btn-warning cancel" ng-click="closeNewFeature()">Cancel</button>
        <button class="btn btn-primary" ng-click="createFeature(newFeature)">Confirm</button>
    </div>
</div>

<div modal="showViewFeature" close="closeViewFeature()" options="modalOptions">
    <div class="modal-header">
        <h3>Feature {{selectedFeature.id}}</h3>
    </div>
    <div class="modal-body">

        <form>

            <div class="controls">
                <input type="text" class="span8" ng-model="selectedFeature.title" autofocus="autofocus" placeholder="Feature" required>
            </div>

            <div class="controls controls-row">
                <textarea class="span8" rows="10" ng-model="selectedFeature.description" placeholder="Extended Description"></textarea>
            </div>

            <div class="controls controls-row">
                <select class="span2" ng-model="selectedFeature.engineeringCost" ng-options="e for e in enumSizes"></select>
                <select class="span2" ng-model="selectedFeature.revenueBenefit" ng-options="e for e in enumSizes"></select>
                <select class="span2" ng-model="selectedFeature.retentionBenefit" ng-options="e for e in enumSizes"></select>
                <select class="span2" ng-model="selectedFeature.positioningBenefit" ng-options="e for e in enumSizes"></select>
            </div>

            <div class="controls controls-row">
                <select class="span3" ng-model="selectedFeature.team"></select>
                <select class="span2" ng-model="selectedFeature.quarter" ng-options="e for e in enumQuarters"></select>
                <select class="span3" ng-model="selectedFeature.state" ng-options="e for e in enumFeatureStates"></select>
            </div>

            <div class="controls controls-row">
                <input type="text" class="span8" ui-select2="select2Options" ng-model="selectedFeature.tags"/>
            </div>

        </form>

        <span class="error" ng-show="error == null">{{error}}</span>

    </div>
    <div class="modal-footer">
        <button class="btn btn-warning cancel" ng-click="closeViewFeature()">Cancel</button>
        <button class="btn btn-primary" ng-click="saveFeature(selectedFeature)">Confirm</button>
    </div>
</div>